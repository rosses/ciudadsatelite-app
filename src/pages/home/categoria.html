<!--
  Generated template for the MyPetsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title>{{title}}</ion-title>
    <ion-item>
        <ion-icon name="search" (click)="toggleSearch()" item-right></ion-icon>
    </ion-item>
  </ion-navbar>
  <ion-toolbar class="searchbar" *ngIf="searchActive">
      <ion-searchbar (ionClear)="onClear($event)" (ionInput)="onSearch($event)" [(ngModel)]="search" placeholder="Tiendas, productos y servicios en {{title}}"></ion-searchbar>
  </ion-toolbar>
</ion-header>

<ion-content>

<div *ngIf="isSearching" class="search-container">
  <div *ngIf="isSearchingLoad">
    <div text-center>
      <ion-spinner></ion-spinner>
      <br /><br />
      <strong>Buscando</strong><br />
      &quot;{{search}}&quot;
    </div>
  </div>
  <div *ngIf="!isSearchingLoad">
    <div *ngIf="searchStores.length == 0 && searchProducts.length == 0 && searchServices.length == 0 && !isSearchingLoad" text-center>
      <ion-icon name="hand"></ion-icon>
      <br />
      <strong>No se encontraron resultados</strong><br />
      &quot;{{search}}&quot;
    </div>
  </div>
</div>


<ion-refresher (ionRefresh)="doRefresh($event)"  *ngIf="!isSearching">
  <ion-refresher-content pullingText="actualizar..." refreshingText="actualizando..."></ion-refresher-content>
</ion-refresher>

<div *ngIf="isLoading">
  <div class="timeline-wrapper">
      <div class="timeline-item forceh">
        <div class="animated-background">
          <div class="background-masker news-icon"></div>
          <div class="background-masker news-icon2"></div>
         </div>
      </div>
  </div>
  <div class="timeline-wrapper">
      <div class="timeline-item forceh">
        <div class="animated-background">
          <div class="background-masker news-icon"></div>
          <div class="background-masker news-icon2"></div>
         </div>
      </div>
  </div>
  <div class="timeline-wrapper">
      <div class="timeline-item forceh">
        <div class="animated-background">
          <div class="background-masker news-icon"></div>
          <div class="background-masker news-icon2"></div>
         </div>
      </div>
  </div>
</div>

<div *ngIf="!isLoading && !isSearching">

  <ion-list class="list-store">
    <ion-item *ngFor="let store of stores" (click)="verStore(store)" text-wrap>
      <ion-avatar item-start>
        <img src="{{store.avatar != '' ? store.avatar : 'assets/img/default/store.png'}}" />
      </ion-avatar>
      <ion-row>
        <ion-col col-9>
          <h2>{{store.name}}</h2>
          <h3>{{store.address}}</h3>
          <!--<p>I've had a pretty messed up day. If we just...</p>-->
        </ion-col>
        <ion-col col-3 text-right class="mts">
          <div class="vertical-align-content" *ngIf="store.lat != '' && store.lng != ''">
            <img src="assets/img/map-location.png" (click)="showMap(store)" />
          </div>
        </ion-col>
      </ion-row>
    </ion-item>
  </ion-list>
</div>

<ion-card *ngIf="!isLoading && stores.length == 0">
  <ion-card-header class="no-items">
    <ion-icon name="pricetag"></ion-icon>
    <br />
    No tenemos tiendas en <br />
    <strong>{{title}}</strong>
  </ion-card-header>
  <ion-list>
    <button ion-item (click)="goContacto()">
      <b>¿Como puedo aparecer aquí?</b>
      <ion-icon name="arrow-forward" item-end></ion-icon>
    </button>
  </ion-list>  
</ion-card>


</ion-content>